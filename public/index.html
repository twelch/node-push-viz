<!doctype html>
<html>
    <head>
        <script src='//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js'></script>
        <script src='/socket.io/socket.io.js'></script>
        <script src="Chart.js"></script>
        <script>
            dough_chart = null;
            var socket = io.connect('//localhost:8080');

            socket.on('init-server', function(data) {
                console.log(data.message);
                socket.emit('init-client', {data: 'Client is connected'});
            });

            socket.on('viz-load', function(data) {
                drawViz(data);
            });

            socket.on('error', function() { console.error(arguments) });
            socket.on('message', function() { console.log(arguments) });

            function drawViz(data) {
                var ctx = $("#doughnut").get(0).getContext("2d");
                if (!dough_chart) {
                    dough_chart = new Chart(ctx);
                }

                var data = [
                    {
                        value: 30,
                        color:"#F7464A"
                    },
                    {
                        value : 50,
                        color : "#E2EAE9"
                    },
                    {
                        value : 100,
                        color : "#D4CCC5"
                    },
                    {
                        value : 40,
                        color : "#949FB1"
                    },
                    {
                        value : 120,
                        color : "#4D5360"
                    }

                ];

                dough_chart.Doughnut(data);
            }

        </script>
    </head>
    <body>
        <div id="work_area">
            <canvas id="doughnut" width="300" height="300"></canvas>
        </div>
    </body>
</html>